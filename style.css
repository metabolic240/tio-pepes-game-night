/* Base */
* { box-sizing: border-box; }
html, body {
  margin: 0; padding: 0; height: 100%; background: #000;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}
#gameCanvas {
  position: fixed; inset: 0; width: 100%; height: 100%;
  display: block;
}

/* Countdown & hint & replay */
#countdown {
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
  font-weight: 900; font-size: clamp(52px, 18vw, 200px); color: #fff;
  text-shadow: 0 0 18px rgba(0,0,0,0.5);
  z-index: 5000; display: none;
}
#hint {
  position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%);
  color: rgba(255,255,255,0.85); font-weight: 700; letter-spacing: 0.3px;
  background: rgba(0,0,0,0.35); padding: 8px 12px; border-radius: 10px;
  backdrop-filter: blur(6px);
  z-index: 5000;
}
#replayBtn {
  position: fixed; right: 12px; bottom: 12px; z-index: 6000;
  border: none; color: #000; background: #FFD700;
  padding: 10px 14px; border-radius: 12px; font-weight: 800; cursor: pointer;
  box-shadow: 0 8px 30px rgba(0,0,0,0.35);
  display: none;
}
.hidden { display: none; }

/* Splash */
:root { --splash-image: url("./images/splash-portrait.png"); --theme-glow: #ff00aa; }
#splash {
  position: fixed; inset: 0; z-index: 9999;
  display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
  background-image: var(--splash-image);
  background-size: cover; background-position: center; background-repeat: no-repeat;
  box-shadow: inset 0 0 0 100vmax rgba(0,0,0,0.28);
  animation: splashReveal 350ms ease-out, splashHold 1000ms linear 350ms forwards, splashExit 500ms ease-in 1350ms forwards;
}
#splash .title {
  margin-bottom: 7vh;
  font-weight: 900; letter-spacing: 0.5px; line-height: 1.1; text-align: center;
  font-size: clamp(28px, 6vw, 52px); color: #fff;
  text-shadow: 0 0 18px rgba(0,0,0,0.45), 0 0 36px rgba(0,0,0,0.3);
}
@keyframes splashReveal { from {opacity:0; transform:scale(1.03);} to {opacity:1; transform:scale(1);} }
@keyframes splashHold   { from {opacity:1;} to {opacity:1;} }
@keyframes splashExit   { to   {opacity:0;} }

/* Top bar */
#topbar {
  position: fixed; top: 8px; left: 8px; right: 8px;
  display: flex; gap: 8px; justify-content: flex-start;
  z-index: 10000;
}
.mode-btn {
  background: rgba(0,0,0,0.35); backdrop-filter: blur(6px);
  border: none; border-radius: 10px; color: #fff;
  padding: 8px 10px; cursor: pointer;
  box-shadow: 0 2px 10px rgba(0,0,0,0.25);
}
.mode-btn.active { outline: 2px solid rgba(255,255,255,0.6); }

/* Score mode */
#mode-score {
  position: fixed; inset: 0;
  display: grid; grid-template-rows: 1fr auto;
  z-index: 9000; /* under topbar */
}
.score-wrap { position: relative; display: grid; grid-template-rows: 1fr 1fr; }
.side { display: grid; place-items: center; user-select: none; padding: 12px; }
.side.top { transform: rotate(180deg); }
.side .name {
  font-weight: 800; font-size: clamp(18px, 5vw, 28px);
  color: #fff; opacity: 0.9; margin-bottom: 8px; outline: none; text-align: center;
}
.side .points {
  font-weight: 900; font-size: clamp(60px, 20vw, 160px); color: #fff;
  text-shadow: 0 0 18px rgba(0,0,0,0.4); line-height: 1;
}
.side .wins { margin-top: 6px; display: flex; gap: 6px; }
.win-dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.6); }
.win-dot.filled { background: rgba(255,255,255,1); }
.score-controls {
  display: flex; align-items: center; justify-content: center; gap: 12px; padding: 10px;
  background: rgba(0,0,0,0.35); color: #fff; backdrop-filter: blur(6px);
}
.score-controls select, .score-controls button {
  border: none; border-radius: 10px; padding: 8px 12px; font-weight: 600;
}
.score-controls select { background: rgba(255,255,255,0.9); }
.score-controls .ghost { background: rgba(255,255,255,0.2); color: #fff; cursor: pointer; }
.toast {
  position: fixed; left: 50%; bottom: 90px; transform: translateX(-50%);
  background: rgba(0,0,0,0.7); color: #fff; padding: 10px 14px; border-radius: 12px;
  font-weight: 700; box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}
